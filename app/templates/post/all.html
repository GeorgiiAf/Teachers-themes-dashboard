{% extends 'main/base.html' %}

{% block title %}All themes{% endblock %}

{% block style %}
<link rel="stylesheet" href="{{url_for('static', filename='css/libs/all.min.css') }}">
{% endblock %}


{% block content %}
<form method="post" class="form-control d-flex flex-row gap-2" id="teacherForm">
    {{ form.csrf_token }}
    {{ form.teacher }}
    <input type="submit" class="btn btn-success" value="Show">

</form>



<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th scope="col">Teacher</th>
            <th scope="col">Subject</th>
            <th scope="col">Student</th>
            {% if current_user.is_authenticated %}
            <th scope="col">Action</th>
            {% endif %}

        </tr>
        </thead>
        <tbody>
        {% for post in posts %}
        <tr>
            <td scope="row">
                <img src="{{ url_for('static' , filename='upload/' + post.author.avatar ) }}" alt="Teacher">
                {{ post.author.name }}
            </td>
            <td>{{ post.subject }}</td>

            <td>
                {% with student = user.query.get(post.student) %}
                <img src="{{ url_for('static' , filename='upload/' + student.avatar ) }}" alt="Student">
                {{ student.name }}
                {% endwith %}
            </td>

            <td>
                {% if current_user.is_authenticated and post.author.id == current_user.id %}

                <a href="{{ url_for('post.update', id=post.id) }}" class="btn btn-secondary">
                    <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>

                <a href="{{ url_for('post.delete', id=post.id) }}" class="btn btn-danger">
                    <i class="fa-solid fa-trash"></i> Delete
                </a>
                {% endif %}

            </td>

        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
