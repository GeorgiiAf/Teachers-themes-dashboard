{% extends 'main/base.html' %}

{% block title %}All themes{% endblock %}

{% block style %}
<link rel="stylesheet" href="{{url_for('static', filename='css/libs/all.min.css') }}">
<link rel="stylesheet" href="{{url_for('static', filename='css/themes.css') }}">
{% endblock %}


{% block content %}
<form method="post" class="form-control d-flex flex-row gap-2" id="teacherForm">
    {{ form.csrf_token }}
    {{ form.teacher }}
    <input type="submit" class="btn btn-success" value="Show">

</form>


<div class="w-100 mt-4">
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
    <thead>
        <tr>
            <th scope="col">Teacher</th>
            <th scope="col">Subject</th>
            <th scope="col">Student</th>
            {% if current_user.is_authenticated %}
            <th scope="col">Action</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <td data-label="Teacher">
                <div class="teacher-name">
                    <img src="{{ url_for('static' , filename='upload/' + post.author.avatar ) }}"
                         alt="Teacher" class="avatar">
                    {{ post.author.name }}
                </div>
            </td>
            <td data-label="Subject">{{ post.subject }}</td>
            <td data-label="Student">
                {% with student = user.query.get(post.student) %}
                <div class="student-name">
                    <img src="{{ url_for('static' , filename='upload/' + student.avatar ) }}"
                         alt="Student" class="avatar">
                    {{ student.name }}
                </div>
                {% endwith %}
            </td>
            {% if current_user.is_authenticated and post.author.id == current_user.id %}
            <td data-label="Action">
                <a href="{{ url_for('post.update', id=post.id) }}" class="btn btn-secondary btn-sm">
                    <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>
                <a href="{{ url_for('post.delete', id=post.id) }}" class="btn btn-danger btn-sm">
                    <i class="fa-solid fa-trash"></i> Delete
                </a>
            </td>
            {% elif current_user.is_authenticated %}
            <td data-label="Action"></td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
</div>

{% endblock %}
