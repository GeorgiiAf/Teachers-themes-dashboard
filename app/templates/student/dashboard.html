{% extends 'main/base.html' %}

{% block content %}
<h2 class="mb-4">Your Assigned Topics</h2>

{% for post in posts %}
<div class="card mb-4 p-4 shadow-sm">
    <h3 class="mb-3">{{ post.subject }}</h3>
    <p><strong>Discipline:</strong> {{ post.discipline }}</p>

    <p><strong>Status:</strong>
        {% if post.is_checked %}
            <span class="badge bg-success">Approved</span>
        {% else %}
            <span class="badge bg-warning text-dark">Awaiting approval</span>
        {% endif %}
    </p>

    <p><strong>Deadline:</strong>
        {% if post.deadline %}
            {{ post.deadline.strftime('%Y-%m-%d') }}
        {% else %}
            <em>Not set</em>
        {% endif %}
    </p>

    <p><strong>Teacher's comments:</strong> {{ post.comment or 'No comments yet' }}</p>
    <p><strong>Your comments:</strong> {{ post.student_comment or 'No comments yet' }}</p>

    <div class="d-flex gap-2 align-items-center mt-3">
        {% if post.student_file %}
            <a href="{{ url_for('static', filename='upload/docs/' + post.student_file) }}" class="btn btn-success btn-sm" target="_blank">
                ðŸ“„ Downloaded File
            </a>
        {% else %}
            <span class="text-muted">You haven't uploaded a file yet.</span>
            <a href="{{ url_for('student.upload', post_id=post.id) }}" class="btn btn-primary btn-sm">
                ðŸ“¤ Upload Work
            </a>
        {% endif %}

        <a href="{{ url_for('student.comment', post_id=post.id) }}" class="btn btn-outline-secondary btn-sm">
            ðŸ’¬ Leave Comment
        </a>
    </div>
</div>
{% else %}
<p>No topics assigned yet.</p>
{% endfor %}

{% endblock %}
